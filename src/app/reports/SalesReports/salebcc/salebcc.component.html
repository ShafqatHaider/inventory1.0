<div class="container-fluid mt-2 py-2">
  <!-- <app-snakbar *ngIf="!isData"></app-snakbar> -->
  <div class="card">
    <!-- <div class="card-head py-2 px-1" style="background: #e5f2fe">
      <div class="flex-row">
        <div class="back no-print">
          <a (click)="location.back()">
            <i class="fa-solid fa-arrow-left"></i>
          </a>
        </div>
        <div class="heading">
          <h5 class="text-center">BCC Report</h5>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-6 col-md-5 col-lg-5">
          <div class="form-group" style="width: 100%">
            <label>From</label>
            <input type="date" class="form-control" [(ngModel)]="fDate" />
          </div>
        </div>
        <div class="col-sm-6 col-6 col-md-5 col-lg-5">
          <div class="form-group" style="width: 100%">
            <label>To</label>
            <input type="date" class="form-control" [(ngModel)]="tDate" />
          </div>
        </div>

        <div class="col-12 col-sm-12 col-lg-2 col-md-2">
          <div class="row mt-2">
            <div class="col-12">
              <button
                class="eas-button eas-btn-white mt-4 no-print"
                (click)="getReport()"
                style="width: 50%"
              >
                <i class="fa-solid fa-arrows-rotate"></i>
              </button>
              <button
                class="eas-button eas-btn-white mt-4 no-print"
                (click)="createReportPdf()"
                style="width: 50%"
              >
                PDF
              </button>
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <div class="card" style="background-color: rgba(217, 217, 217, 1)">
      <div class="flex-row">
        <div class="col-md-2">
          <div class="d-flex gap-2">
            <a (click)="location.back()">
              <i class="fa-solid fa-arrow-left fs-4 mt-1"></i>
            </a>
            <h4>BCC Report</h4>
          </div>
        </div>
        <div class="col-md-10 mb-2">
          <div class="row">

            <div class="col-sm-6  col-md-5">
                <div class="form-group"  style="width: 100%;">
                    <label>From</label>
                <input type="date" class="form-control" [(ngModel)]="fDate">
                </div>
            </div>
               <div class="col-sm-6  col-md-5">
                <div class="form-group"  style="width: 100%;">
                    <label>To</label>
                    <input type="date" class="form-control" [(ngModel)]="tDate">
                   </div>
               </div>
              
           
               
               <div class="col-sm-6 col-md-2">
                 <div class="row mt-4">
                   <button
                   class="eas-button eas-btn-white no-print form-control text-light"
                   (click)="getReport()"
                   style="width: 45%; background-color: rgba(27, 143, 252, 1)"
                   >
                   Get
                  </button>
                <button
                class="eas-button eas-btn-white no-print form-control"
                (click)="createReportPdf()"
                  style="width: 45%; background-color: rgba(252, 226, 31, 1)"
                >
                Export
                </button>
              </div>
            </div>
          </div>
          </div>
      </div>
      </div>
      
      <div class="card-body" style="width: 100%">
      <ng-container *ngIf="isData">
        <table class="my-3">
          <tr>
            <td style="font-weight: bold" rowspan="2" colspan="2">
              Grand Total:
            </td>
            <td style="font-weight: bold; text-align: center">Total Sale</td>
            <td style="font-weight: bold; text-align: center">Total Retrun</td>
            <td style="font-weight: bold; text-align: center">
              Total Discount
            </td>
            <td style="font-weight: bold; text-align: center">
              Total Cash Received
            </td>
          </tr>
          <tr>
            <!-- <td style="font-weight: bold;text-align: center;">{{qtyTotal}}</td> -->
            <td style="font-weight: bold; text-align: center">
              {{ totalSale }}
            </td>
            <td style="font-weight: bold; text-align: center">
              {{ totalRet }}
            </td>
            <td style="font-weight: bold; text-align: center">
              {{ totalDiscount }}
            </td>
            <td style="font-weight: bold; text-align: center">
              {{ totalCash }}
            </td>
          </tr>
        </table>
        <div
        class="card border-0 shadow mt-3 px-3"
        *ngFor="let data of bccRepo"
        >
          <div class="card-head mt-3 text-center">
            <table class="my-2">
              <td style="font-weight: bold">Date:</td>
              <td style="text-align: right">
                {{ data.eDate | date : "dd-MM-yyyy" }}
              </td>
              <td style="font-weight: bold">Total Cash Received</td>
              <td style="text-align: right">{{ data.totalCashRece }}</td>
              <td style="font-weight: bold">Total Sale</td>
              <td style="text-align: right">{{ data.totalSale }}</td>
              <td style="font-weight: bold">Total Return</td>
              <td style="text-align: right">{{ data.totalRet }}</td>
              <td style="font-weight: bold">Total Discount</td>
              <td style="text-align: right">{{ data.totalDis }}</td>
            </table>
          </div>
          
          <div class="card-body p-0 m-0" *ngFor="let b of data['party']">
            <div class="table-responsive-sm">
              <div class="row m-0 p-0">
                <!-- <h4 class="text-center">{{b.billType}}</h4> -->
                <table class="my-2">
                  <td style="font-weight: bold">Bill Type:</td>
                  <td style="text-align: right">{{ b.billType }}</td>
                  <td style="font-weight: bold">Total Cash Received</td>
                  <td style="text-align: right">{{ b.totalCashRece }}</td>
                  <td style="font-weight: bold">Total Sale</td>
                  <td style="text-align: right">{{ b.totalSale }}</td>
                  <td style="font-weight: bold">Total Return</td>
                  <td style="text-align: right">{{ b.totalRet }}</td>
                  <td style="font-weight: bold">Total Discount</td>
                  <td style="text-align: right">{{ b.totalDis }}</td>
                </table>
              </div>
              <table class="table table-hover table-sm w-table table-bordered">
                <thead>
                  <tr>
                    <th style="width: 20%; text-align: left">Bill#</th>
                    <th style="width: 50%; text-align: left">Party</th>
                    <th style="width: 10%; text-align: right">Sale</th>
                    <th style="width: 10%; text-align: right">Return</th>
                    <th style="width: 10%; text-align: right">Discount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let c of b.bills">
                    <td style="width: 20%; text-align: left">{{ c.smId }}</td>
                    <td style="width: 50%; text-align: left">
                      {{ c.partyName }}
                    </td>
                    <td style="text-align: right; width: 10%">
                      {{ c.gSales }}
                    </td>
                    <td style="text-align: right; width: 10%">
                      {{ c.sReturn }}
                    </td>
                    <td style="text-align: right; width: 10%">
                      {{ c.discountUser }}
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td rowspan="2"><b>Total:</b></td>
                    <td></td>
                    <td style="text-align: right"><b>Cash Received</b></td>
                    <td style="text-align: right"><b>Return</b></td>
                    <td style="text-align: right"><b>Discount</b></td>
                  </tr>
                  <tr>
                    <td></td>
                    <td style="width: 10%; text-align: right">
                      {{ data.totalCashRece }}
                    </td>
                    <td style="width: 10%; text-align: right">
                      {{ data.totalRet }}
                    </td>
                    <td style="width: 10%; text-align: right">
                      {{ data.totalDis }}
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="!isData">
        <h2 class="text-center" style="color: #cecece">NO ANY DATA</h2>
      </ng-container>
    </div>
  </div>
  
  
</div>