<div class="container-fluid mt-2 py-2">
  <!-- <app-snakbar *ngIf="!isData"></app-snakbar> -->
  <div class="card">
    <!-- <div class="card-head py-2 px-1" style="background: #e5f2fe">
      <div class="flex-row">
        <div class="back no-print">
          <a (click)="location.back()">
            <i class="fa-solid fa-arrow-left"></i>
          </a>
        </div>
        <div class="heading">
          <h5 class="text-center">Stock List</h5>
        </div>
      </div>
      <div class="row">
        <div class="col-12 col-sm-12 col-lg-4 col-md-4">
          <label
            ><div class="form-check">
              <input class="form-check-input" type="checkbox" value="" #filter (change)="filterChanged($event.target.checked)"  >
              <label class="form-check-label" for="flexCheckDefault">
                {{
                  !isFilter
                    ? "Filter By Category Account"
                    : "Select Category Account"
                }}
              </label>
            </div></label
          >
          <ng-select
            [ngClass]="{ disabled: !isFilter }"
            [appendTo]="'body'"
            [items]="cate"
            bindLabel="title"
            bindValue="cateID"
            (change)="onSelectCategory($event)"
            required
          >
          </ng-select>
        </div>
        <div class="col-5">
          <div class="form-group"  style="width: 100%;">
              <label>From</label>
          <input type="date" class="form-control" [(ngModel)]="fDate">
          </div>
      </div>
        <div class="col-12 col-sm-12 col-lg-5 col-md-5">
          <div class="form-group" style="width: 100%">
            <label>Till Date</label>
            <input type="date" class="form-control" [(ngModel)]="tillDate" />
          </div>
        </div>

        <div class="col-12 col-sm-12 col-lg-2 col-md-2">
          <div class="row mt-2 c-row">
            <div class="col-12 col-md-12">
              <button
                class="eas-button eas-btn-white mt-4 no-print"
                (click)="getReport()"
                style="width: 50%"
              >
                <i class="fa-solid fa-arrows-rotate"></i>
              </button>
              <button
                class="eas-button eas-btn-white mt-4 no-print"
                (click)="createReportPdf()"
                style="width: 50%"
              >
                PDF
              </button>
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <div class="card " style="background-color: rgba(217, 217, 217, 1);">
      <div class="flex-row ">
        <div class="col-md-3">
          <div class="d-flex gap-2">
            <a (click)="location.back()">
              <i class="fa-solid fa-arrow-left fs-4 mt-1"></i>
            </a>
            <h4>Stock List</h4>
            
          </div>
        </div>
        <div class="col-md-10 mb-2">
          <div class="row">
            <div class="col-12 col-sm-12 col-lg-4 col-md-4">
              <label
                ><div class="form-check">
                  <!-- <input class="form-check-input" type="checkbox" value="" #filter (change)="filterChanged($event.target.checked)"  > -->
                  <label class="form-check-label" for="flexCheckDefault">
                    {{
                      !isFilter
                        ? "Filter By Category Account"
                        : "Select Category Account"
                    }}
                  </label>
                </div></label
              >
              <ng-select
              [items]="items"
              
              bindLabel="title"
              bindValue="cateID"
              [(ngModel)]="selectedItem"
              required
              >
              </ng-select>
            </div>

            
            <!-- <div class="col-3">
              <div class="form-group"  style="width: 100%;">
                  <label>From</label>
              <input type="date" class="form-control" [(ngModel)]="fDate">
              </div>
          </div> -->
            <div class="col-12 col-sm-12 col-lg-4 col-md-4">
              <div class="form-group" style="width: 100%">
                <label>Till Date</label>
                <input type="date" class="form-control" [(ngModel)]="tillDate" />
              </div>
            </div>
    
            <div class="col-6 col-sm-6 col-md-3">
              <div class="row mt-4">
                <button
                  class="eas-button eas-btn-white  no-print form-control text-light"
                  (click)="getReport()"
                  style="width: 45%;background-color: rgba(27, 143, 252, 1);"
                >
                  Get
                </button>
                <button
                  class="eas-button eas-btn-white  no-print form-control"
                  (click)="createReportPdf()"
                  style="width: 45% ; background-color: rgba(252, 226, 31, 1);
;"
                >
                  Export
                </button>
              </div>
            </div>
          </div>
      </div>
    </div>
    </div>
    <div class="card-body" style="width: 100%">
      <!-- <ng-container *ngIf="isData">
        <div>
          <table class="table">
            <tbody>
              <tr>
                <td><b>Date</b></td>
                <td style="text-align: right">{{ tillDate }}</td>
              </tr>
              <tr>
                <td><b>Stock Value</b></td>
                <td style="text-align: right">
                  <b>{{ totalStockValue }}</b>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="table-responsive-sm">
          <div class="table-responsive-sm">
            <table class="table">
              <thead>
                <tr>
                  <th style="text-align: left">ٰItem name</th>
                  <th style="text-align: right" *ngIf="bnid === 1">Lot#</th>
                  <th style="text-align: right">Cost</th>
                  <th style="text-align: right">S.Price</th>
                  <th style="text-align: right">Qty In</th>
                  <th style="text-align: right">Qty Out</th>
                  <th style="text-align: right">Balance</th>
                  <th style="text-align: right">Value</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let code of stockList">
                  <td style="text-align: left">{{ code.itemName }}</td>
                  <td style="text-align: right" *ngIf="bnid === 1">
                    {{ code.lotNo }}
                  </td>
                  <td style="text-align: right">{{ code.costRate }}</td>
                  <td style="text-align: right">{{ code.salerate }}</td>
                  <td style="text-align: right">{{ code.qtyIn }}</td>
                  <td style="text-align: right">{{ code.qtyOut }}</td>
                  <td style="text-align: right">{{ code.balQty }}</td>
                  <td style="text-align: right">
                    {{ code.balQty * code.costRate }}
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="3"><b>Total</b></td>
                  <td style="text-align: right">
                    <b>{{ totalQtyIn }}</b>
                  </td>
                  <td style="text-align: right">
                    <b>{{ tQtyOut }}</b>
                  </td>
                  <td style="text-align: right">
                    <b>{{ totalQty }}</b>
                  </td>
                  <td style="text-align: right">
                    <b>{{ totalStockValue }}</b>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </ng-container> -->

      <ng-container *ngIf="isData">
        <div class="container-fluid">
          <div class="mt-3">
              <div class="border border-black p-3">
                <h3>Stock List</h3>
             
                <div class="d-flex gap-2">
                  <h3>Category:<span class="mb-4  fs-4 text-center" style="border-bottom:3px solid black ; width: 200px;">{{ selectedItem}}</span></h3>
                  
              </div>
                <div class="d-flex gap-5 flex-wrap">
                  <!-- <p class="fw-bold fs-5">Date: {{pdate | date}}</p> -->
                  <!-- <p class="fw-bold fs-5">From: {{fDate}}</p> -->
                  <p class="fw-bold fs-5">Date: {{tillDate}}</p>
                </div>
              
              <div>
                <div>
                  <h4 class="mt-3"></h4>
                </div>
                
                <table
                  class="table table-responsive table-bordered border-black mt-3"
                >
                  <thead>
                    <tr>
                      <th  class="bg-black text-light">ٰItem name</th>
                      <th style="text-align: right" *ngIf="bnid === 1">Lot#</th>
                      <th  class="bg-black text-light">Cost</th>
                      <th  class="bg-black text-light">S.Price	</th>
                      <th  class="bg-black text-light">Qty In	</th>
                      <th  class="bg-black text-light">Qty Out	</th>
                      <th  class="bg-black text-light">Balance	</th>
                      <th  class="bg-black text-light">Value</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let code of stockList">
                      <td style="text-align: left">{{ code.itemName }}</td>
                      <td style="text-align: right" *ngIf="bnid === 1">
                        {{ code.lotNo }}
                      </td>
                      <td style="text-align: right">{{ code.costRate }}</td>
                      <td style="text-align: right">{{ code.salerate }}</td>
                      <td style="text-align: right">{{ code.qtyIn }}</td>
                      <td style="text-align: right">{{ code.qtyOut }}</td>
                      <td style="text-align: right">{{ code.balQty }}</td>
                      <td style="text-align: right">
                        {{ code.balQty * code.costRate }}
                      </td>
                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="3"><b>Total</b></td>
                      <td style="text-align: right">
                        <b>{{ totalQtyIn }}</b>
                      </td>
                      <td style="text-align: right">
                        <b>{{ tQtyOut }}</b>
                      </td>
                      <td style="text-align: right">
                        <b>{{ totalQty }}</b>
                      </td>
                      <td style="text-align: right">
                        <b>{{ totalStockValue }}</b>
                      </td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="!isData">
        <h2 class="text-center" style="color: #cecece">NO ANY DATA</h2>
      </ng-container>
    </div>
  </div>
</div>
